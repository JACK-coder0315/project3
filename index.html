<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Glucose Response Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/dc@4/dist/style/dc.min.css" />
</head>
<body>
  <header>
    <h1>Glucose Response Explorer</h1>
    <button id="reset-filters">Reset Filters</button>
  </header>

  <main id="charts">
    <!-- Overview -->
    <section class="chart-row" id="overview">
      <div class="chart">
        <h2>Dashboard Overview</h2>
        <p>Explore how meal timing and nutrients affect 2-hour glucose increase.</p>
      </div>
    </section>

    <!-- Filters -->
    <section class="chart-row">
      <div id="time-histogram" class="chart">
        <h2>Meal Time (Hour)</h2>
        <div class="dc-chart"></div>
        <p>This histogram shows the number of meal events in each hour of the day, helping you identify peak eating times.</p>
      </div>
      <div id="subject-select" class="chart">
        <h2>Participant</h2>
        <div class="dc-chart"></div>
        <p>Use this dropdown to filter the dashboard for a specific participant's data.</p>
      </div>
      <div id="total-count" class="chart">
        <h2>Event Count</h2>
        <div class="dc-chart"></div>
        <p>Displays the total number of meal records currently selected by all active filters.</p>
      </div>
    </section>

    <!-- Nutrient Histograms -->
    <section class="chart-row">
      <div id="carb-histogram" class="chart">
        <h2>Carbs (10g bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of carbohydrate intake per meal, grouped in 10-gram increments.</p>
      </div>
      <div id="prot-histogram" class="chart">
        <h2>Protein (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of protein intake per meal, grouped in 5-gram increments.</p>
      </div>
      <div id="fat-histogram" class="chart">
        <h2>Fat (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of fat intake per meal, grouped in 5-gram increments.</p>
      </div>
    </section>

    <section class="chart-row">
      <div id="sugar-histogram" class="chart">
        <h2>Sugar (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of sugar intake per meal, grouped in 5-gram increments.</p>
      </div>
      <div id="fiber-histogram" class="chart">
        <h2>Fiber (2g bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of dietary fiber intake per meal, grouped in 2-gram increments.</p>
      </div>
      <div id="calorie-histogram" class="chart">
        <h2>Calories (100kcal bins)</h2>
        <div class="dc-chart"></div>
        <p>Shows the distribution of total calories per meal, grouped in 100-kcal increments.</p>
      </div>
    </section>

    <!-- Scatter Plot -->
    <section class="chart-row">
      <div id="scatter-plot" class="chart large">
        <h2>Carbs vs. Glucose Increase</h2>
        <div class="dc-chart"></div>
        <p>This scatter plot displays each meal as a point: carbohydrate grams on the x-axis vs. 2-hour glucose increase on the y-axis.</p>
      </div>
    </section>

    <!-- Key Insights -->
    <section class="chart-row" id="argument">
      <div class="chart large">
        <h2>Key Insights</h2>
        <p><strong>1. Carbohydrates</strong> are the primary driver of glucose increase.</p>
        <p><strong>2. Macronutrients</strong> (protein, fat, fiber) blunt the glucose spike.</p>
        <p><strong>3. Meal Timing</strong> affects sensitivity (e.g., breakfast vs. dinner).</p>
        <p><strong>4. Individual Variation</strong> shows personal metabolic differences.</p>
        <p><strong>5. Data Robustness</strong> ensured by event count under filters.</p>
      </div>
    </section>
  </main>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/crossfilter2@1/crossfilter.min.js"></script>
  <script src="https://unpkg.com/dc@4/dist/dc.min.js"></script>
  <script src="script.js"></script>
</body>
</html>