<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Glucose Response Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://unpkg.com/dc@4/dist/style/dc.min.css" />
</head>
<body>
  <header>
    <h1>Glucose Response Explorer</h1>
    <button id="reset-filters">Reset Filters</button>
  </header>

  <main id="charts">
    <!-- Dashboard Overview -->
    <section class="chart-row" id="overview">
      <div class="chart">
        <h2>Dashboard Overview</h2>
        <p>Explore how meal timing and nutrient composition affect 2-hour glucose increase.</p>
      </div>
    </section>

    <!-- Filters & Summary -->
    <section class="chart-row">
      <div id="time-histogram" class="chart">
        <h2>Meal Time (Hour)</h2>
        <div class="dc-chart"></div>
        <p>Number of meal events in each hour of the day.</p>
      </div>
      <div id="subject-select" class="chart">
        <h2>Participant</h2>
        <div class="dc-chart"></div>
        <p>Filter to a single participant’s data.</p>
      </div>
      <div id="total-count" class="chart">
        <h2>Event Count</h2>
        <div class="dc-chart"></div>
        <p>Total meals under current filters.</p>
      </div>
    </section>

    <!-- Nutrient Histograms -->
    <section class="chart-row">
      <div id="carb-histogram" class="chart">
        <h2>Carbs (10g bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of carbohydrate intake per meal.</p>
      </div>
      <div id="prot-histogram" class="chart">
        <h2>Protein (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of protein intake per meal.</p>
      </div>
      <div id="fat-histogram" class="chart">
        <h2>Fat (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of fat intake per meal.</p>
      </div>
    </section>

    <section class="chart-row">
      <div id="sugar-histogram" class="chart">
        <h2>Sugar (5g bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of sugar intake per meal.</p>
      </div>
      <div id="fiber-histogram" class="chart">
        <h2>Fiber (2g bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of fiber intake per meal.</p>
      </div>
      <div id="calorie-histogram" class="chart">
        <h2>Calories (100kcal bins)</h2>
        <div class="dc-chart"></div>
        <p>Distribution of total calories per meal.</p>
      </div>
    </section>

    <!-- Scatter Plot -->
    <section class="chart-row">
      <div id="scatter-plot" class="chart large">
        <h2>Carbs vs. 2-Hour Glucose Increase</h2>
        <div class="dc-chart"></div>
        <p>Each point: x = carbs (g), y = glucose ↑ over 2 hours (mg/dL).</p>
      </div>
    </section>

    <!-- Key Insights -->
    <section class="chart-row" id="argument">
      <div class="chart large">
        <h2>Key Insights</h2>
        <p><strong>1.</strong> Carbs drive most of the glucose rise.</p>
        <p><strong>2.</strong> Protein, fat, and fiber blunt the spike.</p>
        <p><strong>3.</strong> Meal timing matters.</p>
        <p><strong>4.</strong> Individual variation is significant.</p>
        <p><strong>5.</strong> Event count ensures robustness.</p>
      </div>
    </section>
  </main>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/crossfilter2@1/crossfilter.min.js"></script>
  <script src="https://unpkg.com/dc@4/dist/dc.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
